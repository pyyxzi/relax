

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/Logo_Benz.png">
  <link rel="icon" href="/img/%E5%90%95%E5%B8%83.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="彭于晏">
  <meta name="keywords" content="">
  
    <meta name="description" content="歌曲名称         歌手                                                 00:00           00:00">
<meta property="og:type" content="website">
<meta property="og:title" content="静谧音乐盒">
<meta property="og:url" content="http://example.com/music/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="歌曲名称         歌手                                                 00:00           00:00">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-04-16T13:36:02.000Z">
<meta property="article:modified_time" content="2025-04-17T08:25:24.154Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>静谧音乐盒 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />





<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"9cdc2d5aaeee43d6180f548f966d0bad","google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?9cdc2d5aaeee43d6180f548f966d0bad";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 80vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Dalinski</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>主页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/%E5%85%AC%E5%91%8A" target="_self">
                <i class="iconfont icon-twitch-fill"></i>
                <span>公告</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>百宝箱</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/play/ai/3.html" target="_blank">
                    <i class="iconfont icon-google-fill"></i>
                    <span>AI</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-docker"></i>
                <span>休闲</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/game" target="_self">
                    <i class="iconfont icon-steam"></i>
                    <span>游戏</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/music" target="_self">
                    <i class="iconfont icon-music"></i>
                    <span>八音盒</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/%E6%94%BE%E6%98%A0%E5%8E%85" target="_self">
                    <i class="iconfont icon-youtube-fill"></i>
                    <span>放映厅</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/new_page_bg.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.4)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="静谧音乐盒"></span>
          
        </div>

        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      <div class="container nopadding-x-md">
        <div id="board"
          >
          
          <div class="container">
            <div class="row">
              <div class="col-12 col-md-10 m-auto">
                

<article class="page-content">
  

<div id="music-box" class="neo-player">
  <div class="glowing-background">
    <div class="light-effects"></div>
  </div>
  <div class="music-container">
    <div class="music-info">
      <div class="album-cover">
        <img id="album-cover" src="" srcset="/img/loading.gif" lazyload alt="专辑封面">
        <div class="album-disc"></div>
      </div>
      <div class="music-details">
        <h3 id="music-title">歌曲名称</h3>
        <p id="music-artist">歌手</p>
      </div>
    </div>
    
    <div class="music-controls">
      <div class="progress-container">
        <div class="progress-time">
          <span id="current-time">00:00</span>
          <span id="duration">00:00</span>
        </div>
        <div class="progress-bar">
          <div class="progress"></div>
          <div class="progress-handle"></div>
          <div class="progress-hover-time">00:00</div>
        </div>
      </div>
      
      <div class="control-buttons">
        <button id="prev" class="control-btn" title="上一首"><i class="fas fa-step-backward"></i></button>
        <button id="play" class="control-btn play-btn" title="播放/暂停"><i class="fas fa-play"></i></button>
        <button id="next" class="control-btn" title="下一首"><i class="fas fa-step-forward"></i></button>
        
        <div class="volume-container">
          <button id="volume-btn" class="control-btn" title="音量"><i class="fas fa-volume-up"></i></button>
          <div class="volume-slider">
            <input type="range" id="volume" min="0" max="100" value="70">
          </div>
        </div>
        
        <button id="random" class="control-btn" title="随机播放"><i class="fas fa-random"></i></button>
        <button id="loop" class="control-btn" title="循环播放"><i class="fas fa-redo"></i></button>
      </div>
    </div>
    
    <div class="playlist-container">
      <div class="playlist-header">
        <h3>播放列表 <span class="playlist-count"></span></h3>
      </div>
      <ul id="playlist" class="playlist"></ul>
    </div>
  </div>
</div>

<div class="music-resources">
  <h2 class="resources-title">推荐音乐网站</h2>
  <div class="resources-container">
    <div class="resource-item resource-item-left">
      <a href="https://www.2t58.com/" target="_blank">
        <div class="resource-icon">
          <i class="fas fa-headphones-alt"></i>
        </div>
        <div class="resource-info">
          <h3>爱听音乐网</h3>
          <p>拯救你的音乐荒</p>
        </div>
      </a>
    </div>
    <div class="resource-divider"></div>
    <div class="resource-item resource-item-right">
      <a href="https://music.90svip.cn/" target="_blank">
        <div class="resource-icon">
          <i class="fas fa-music"></i>
        </div>
        <div class="resource-info">
          <h3>小白音乐</h3>
          <p>简单的在线音乐网站</p>
        </div>
      </a>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<style>
:root {
  --primary-color: #31c27c;
  --primary-hover: #2ca971;
  --primary-glow: rgba(49, 194, 124, 0.7);
  --secondary-color: #6c5ce7;
  --secondary-glow: rgba(108, 92, 231, 0.7);
  --accent-color: #ff79c6;
  --accent-glow: rgba(255, 121, 198, 0.7);
  --bg-color: #ffffff;
  --bg-panel: rgba(255, 255, 255, 0.9);
  --bg-panel-light: rgba(250, 250, 255, 0.7);
  --text-color: #333333;
  --text-secondary: #666666;
  --shadow-color: rgba(0, 0, 0, 0.1);
  --shadow-glow: 0 0 20px rgba(49, 194, 124, 0.2);
  --gradient-1: linear-gradient(45deg, #31c27c, #4ecdc4);
  --gradient-2: linear-gradient(45deg, #6c5ce7, #3a86ff);
  --gradient-3: linear-gradient(45deg, #ff79c6, #ff5252);
  --transition-slow: 0.5s cubic-bezier(0.19, 1, 0.22, 1);
  --transition-medium: 0.3s ease;
  --transition-fast: 0.2s ease;
  --border-glow: 0 0 5px rgba(49, 194, 124, 0.5);
}

@keyframes backgroundPulse {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes glow {
  0% { box-shadow: 0 0 5px var(--primary-glow); }
  50% { box-shadow: 0 0 15px var(--primary-glow); }
  100% { box-shadow: 0 0 5px var(--primary-glow); }
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
  100% { transform: translateY(0); }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes neonText {
  0% { text-shadow: 0 0 5px var(--primary-glow); }
  50% { text-shadow: 0 0 10px var(--primary-glow), 0 0 15px var(--primary-glow); }
  100% { text-shadow: 0 0 5px var(--primary-glow); }
}

@keyframes equalizer {
  0% { height: 5px; }
  50% { height: 20px; }
  100% { height: 5px; }
}

@keyframes lightMove {
  0% { background-position: 0% 0%; }
  100% { background-position: 100% 0%; }
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
}

.neo-player {
  position: relative;
  max-width: 900px;
  margin: 30px auto;
  padding: 25px;
  border-radius: 20px;
  background: var(--bg-panel);
  box-shadow: 0 10px 30px var(--shadow-color), var(--shadow-glow);
  font-family: 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  overflow: hidden;
  z-index: 10;
}

.glowing-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  overflow: hidden;
}

.light-effects {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg, 
    rgba(49, 194, 124, 0.1) 0%,
    rgba(108, 92, 231, 0.1) 25%, 
    rgba(255, 121, 198, 0.1) 50%, 
    rgba(108, 92, 231, 0.1) 75%,
    rgba(49, 194, 124, 0.1) 100%
  );
  background-size: 400% 400%;
  animation: backgroundPulse 20s ease infinite;
  filter: blur(50px);
  opacity: 0.4;
  will-change: background-position;
  transform: rotate(15deg);
}

.music-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
  position: relative;
  z-index: 1;
}

/* 音乐信息区域 */
.music-info {
  display: flex;
  gap: 25px;
  align-items: center;
  position: relative;
  animation: float 8s ease-in-out infinite;
  will-change: transform;
}

.album-cover {
  width: 180px;
  height: 180px;
  border-radius: 15px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 10px var(--primary-glow);
  transition: transform var(--transition-medium), box-shadow var(--transition-medium);
  animation: glow 4s infinite;
  will-change: transform, box-shadow;
}

.album-cover:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2), 0 0 15px var(--primary-glow);
}

.album-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.album-disc {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 0 0 10px rgba(255, 255, 255, 0.3), 0 0 10px var(--primary-glow);
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-medium);
}

.playing .album-cover .album-disc {
  opacity: 0.9;
}

/* 简化音频可视化 - 减少动画元素数量 */
.visualizer {
  position: absolute;
  bottom: -10px;
  left: 0;
  width: 100%;
  height: 30px;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 3px;
  z-index: 5;
}

.visualizer-bar {
  width: 4px;
  height: 5px;
  background: var(--primary-color);
  border-radius: 1px;
  opacity: 0.8;
  will-change: height;
}

/* 减少视觉元素数量，使用CSS变量以提高性能 */
.visualizer-bar:nth-child(1) { animation: equalizer 1.0s ease-in-out infinite; }
.visualizer-bar:nth-child(2) { animation: equalizer 0.8s ease-in-out infinite 0.1s; }
.visualizer-bar:nth-child(3) { animation: equalizer 1.2s ease-in-out infinite 0.2s; }
.visualizer-bar:nth-child(4) { animation: equalizer 0.9s ease-in-out infinite 0.3s; }
.visualizer-bar:nth-child(5) { animation: equalizer 1.1s ease-in-out infinite 0.4s; }

.playing .visualizer-bar:nth-child(1) { animation-duration: 0.6s; }
.playing .visualizer-bar:nth-child(2) { animation-duration: 0.8s; }
.playing .visualizer-bar:nth-child(3) { animation-duration: 0.5s; }
.playing .visualizer-bar:nth-child(4) { animation-duration: 0.7s; }
.playing .visualizer-bar:nth-child(5) { animation-duration: 0.9s; }

.music-details {
  flex: 1;
}

.music-details h3 {
  margin: 0 0 8px 0;
  font-size: 2rem;
  color: var(--text-color);
  text-shadow: 0 0 3px rgba(49, 194, 124, 0.2);
  position: relative;
  display: inline-block;
}

.music-details h3:after {
  content: '';
  position: absolute;
  width: 100%;
  height: 2px;
  background: linear-gradient(90deg, var(--primary-color), transparent);
  bottom: -4px;
  left: 0;
}

.music-details p {
  margin: 0 0 20px 0;
  color: var(--text-secondary);
  font-size: 1.1rem;
  letter-spacing: 0.5px;
}

.music-source {
  display: inline-flex;
  align-items: center;
  padding: 10px 20px;
  background: var(--bg-panel-light);
  border-radius: 30px;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 0.9rem;
  transition: all var(--transition-medium);
  margin-top: 15px;
  border: 1px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.music-source:before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.5),
    transparent
  );
  transition: left 0.6s;
  will-change: left;
}

.music-source:hover {
  background: var(--primary-color);
  color: white;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(49, 194, 124, 0.2), 0 0 15px var(--primary-glow);
}

.music-source:hover:before {
  left: 100%;
}

.music-source i {
  margin-right: 8px;
  font-size: 1rem;
}

/* 音乐控制区域 */
.music-controls {
  padding: 20px 0;
  border-top: 1px solid rgba(49, 194, 124, 0.1);
  border-bottom: 1px solid rgba(49, 194, 124, 0.1);
  position: relative;
}

.music-controls:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    var(--secondary-glow) 0%,
    var(--primary-glow) 50%,
    var(--accent-glow) 100%
  );
  opacity: 0.03;
  z-index: -1;
}

.progress-container {
  margin-bottom: 20px;
  position: relative;
}

.progress-time {
  display: flex;
  justify-content: space-between;
  color: var(--text-secondary);
  font-size: 0.85rem;
  margin-bottom: 8px;
  letter-spacing: 1px;
}

.progress-bar {
  height: 8px;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 4px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.progress {
  height: 100%;
  width: 0%;
  background: var(--gradient-1);
  border-radius: 4px;
  position: relative;
  transition: width 0.1s linear;
  box-shadow: 0 0 5px var(--primary-glow);
}

/* 优化流光效果，减少绘制复杂度 */
.progress:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.5),
    transparent
  );
  background-size: 100% 100%;
  animation: lightMove 2s linear infinite;
  will-change: background-position;
}

.progress-handle {
  position: absolute;
  right: -8px;
  top: 50%;
  width: 16px;
  height: 16px;
  background: white;
  border-radius: 50%;
  border: 3px solid var(--primary-color);
  transform: translateY(-50%) scale(0);
  transition: transform var(--transition-fast);
  z-index: 2;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1), 0 0 5px var(--primary-glow);
}

.progress-bar:hover .progress-handle {
  transform: translateY(-50%) scale(1);
}

.progress-bar.active .progress-handle {
  transform: translateY(-50%) scale(1.2);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 0 10px var(--primary-glow);
}

.progress-hover-time {
  position: absolute;
  top: -30px;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 3px 10px;
  border-radius: 10px;
  font-size: 0.8rem;
  opacity: 0;
  transition: opacity var(--transition-fast);
  pointer-events: none;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.progress-bar:hover .progress-hover-time {
  opacity: 1;
}

.control-buttons {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin-top: 10px;
}

.control-btn {
  background: none;
  border: none;
  font-size: 1rem;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-medium);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background-color: rgba(0, 0, 0, 0.02);
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.control-btn:hover {
  color: var(--text-color);
  background-color: rgba(49, 194, 124, 0.1);
  box-shadow: 0 0 10px var(--primary-glow);
  transform: translateY(-2px);
}

.control-btn.active {
  color: var(--primary-color);
  text-shadow: 0 0 5px var(--primary-glow);
}

.control-btn::after {
  content: attr(title);
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%) scale(0);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 5px 10px;
  border-radius: 10px;
  font-size: 0.8rem;
  white-space: nowrap;
  opacity: 0;
  transition: all var(--transition-fast);
  pointer-events: none;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.control-btn:hover::after {
  opacity: 1;
  transform: translateX(-50%) scale(1);
  bottom: -40px;
}

.play-btn {
  width: 60px;
  height: 60px;
  background: var(--gradient-1);
  color: white;
  box-shadow: 0 5px 15px rgba(49, 194, 124, 0.2), 0 0 10px var(--primary-glow);
  font-size: 1.5rem;
  z-index: 2;
}

.play-btn:hover {
  background: var(--gradient-2);
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(49, 194, 124, 0.25), 0 0 15px var(--primary-glow);
  color: white;
}

.play-btn i {
  position: relative;
}

/* 简化脉冲动画 */
.play-btn:before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  background: var(--gradient-1);
  border-radius: 50%;
  z-index: -1;
  opacity: 0.2;
  filter: blur(10px);
  animation: pulse 3s infinite;
  will-change: transform, opacity;
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 0.2; }
  50% { transform: scale(1.05); opacity: 0.3; }
  100% { transform: scale(1); opacity: 0.2; }
}

.volume-container {
  display: flex;
  align-items: center;
  position: relative;
}

.volume-slider {
  width: 0;
  overflow: hidden;
  transition: width var(--transition-medium);
  margin-left: 10px;
}

.volume-container:hover .volume-slider {
  width: 80px;
}

input[type=range] {
  -webkit-appearance: none;
  height: 5px;
  border-radius: 2.5px;
  background: rgba(0, 0, 0, 0.05);
  outline: none;
}

input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 5px var(--primary-glow);
}

/* 播放列表区域 */
.playlist-container {
  margin-top: 10px;
  background: var(--bg-panel-light);
  border-radius: 15px;
  padding: 15px;
  border: 1px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.playlist-container:before {
  content: '';
  position: absolute;
  width: 200px;
  height: 200px;
  background: var(--primary-glow);
  border-radius: 50%;
  filter: blur(70px);
  opacity: 0.05;
  top: -100px;
  right: -100px;
}

.playlist-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  position: relative;
}

.playlist-header h3 {
  color: var(--text-color);
  font-size: 1.2rem;
  margin: 0;
  font-weight: 500;
  letter-spacing: 1px;
  position: relative;
  display: inline-block;
}

.playlist-header h3:after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 30px;
  height: 2px;
  background: var(--primary-color);
  box-shadow: 0 0 5px var(--primary-glow);
}

.playlist-count {
  color: var(--primary-color);
  font-size: 0.9rem;
  margin-left: 5px;
}

.playlist {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 300px;
  overflow-y: auto;
  border-radius: 10px;
  background-color: rgba(0, 0, 0, 0.02);
  padding: 5px;
}

.playlist li {
  padding: 12px 15px;
  border-radius: 8px;
  margin-bottom: 5px;
  cursor: pointer;
  transition: all var(--transition-medium);
  display: flex;
  align-items: center;
  border: 1px solid transparent;
}

.playlist li:hover {
  background-color: rgba(49, 194, 124, 0.08);
  border: 1px solid rgba(49, 194, 124, 0.1);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03), 0 0 5px var(--primary-glow);
  transform: translateX(5px);
}

.playlist li.active {
  background-color: rgba(49, 194, 124, 0.15);
  color: var(--primary-color);
  border: 1px solid rgba(49, 194, 124, 0.2);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05), 0 0 5px var(--primary-glow);
}

.playlist li .song-index {
  width: 30px;
  text-align: center;
  color: var(--text-secondary);
  font-size: 0.9rem;
}

.playlist li.active .song-index {
  display: none;
}

.playlist li.active::before {
  content: "\f04b";
  font-family: "Font Awesome 5 Free";
  font-weight: 900;
  color: var(--primary-color);
  width: 30px;
  text-align: center;
  text-shadow: 0 0 5px var(--primary-glow);
}

.playlist li .song-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  margin-right: 10px;
}

.playlist li .song-name {
  font-size: 0.95rem;
  color: var(--text-color);
  margin-bottom: 3px;
}

.playlist li .song-artist {
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.playlist li .song-duration {
  color: var(--text-secondary);
  font-size: 0.8rem;
}

.playing .album-cover img {
  animation: rotate 20s linear infinite;
  animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
}

/* 滚动条样式 */
.playlist::-webkit-scrollbar {
  width: 6px;
}

.playlist::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.03);
  border-radius: 3px;
}

.playlist::-webkit-scrollbar-thumb {
  background: rgba(49, 194, 124, 0.2);
  border-radius: 3px;
}

.playlist::-webkit-scrollbar-thumb:hover {
  background: rgba(49, 194, 124, 0.3);
}

/* 音乐资源链接 */
.music-resources {
  margin: 50px auto;
  max-width: 900px;
  padding: 20px;
  position: relative;
}

.music-resources:before {
  content: '';
  position: absolute;
  width: 100%;
  height: 300px;
  background: var(--secondary-glow);
  filter: blur(100px);
  opacity: 0.03;
  top: -100px;
  left: 0;
  z-index: -1;
}

.resources-title {
  text-align: center;
  margin-bottom: 40px;
  color: var(--text-color);
  font-size: 2rem;
  position: relative;
  letter-spacing: 2px;
  font-weight: 300;
  animation: neonText 4s infinite alternate;
  will-change: text-shadow;
}

.resources-title:after {
  content: '';
  display: block;
  width: 80px;
  height: 3px;
  background: var(--gradient-2);
  margin: 15px auto 0;
  border-radius: 3px;
  box-shadow: 0 0 5px var(--secondary-glow);
}

.resources-container {
  display: flex;
  align-items: stretch;
  background: var(--bg-panel);
  border-radius: 20px;
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1), 0 0 10px var(--secondary-glow);
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.8);
  animation: float 10s ease infinite;
  will-change: transform;
}

.resources-container:before {
  content: '';
  position: absolute;
  top: -150px;
  left: -150px;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, var(--primary-glow), transparent 70%);
  opacity: 0.05;
  z-index: 0;
}

.resources-container:after {
  content: '';
  position: absolute;
  bottom: -150px;
  right: -150px;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, var(--secondary-glow), transparent 70%);
  opacity: 0.05;
  z-index: 0;
}

.resource-item {
  flex: 1;
  position: relative;
  z-index: 1;
  padding: 20px;
  transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
}

.resource-divider {
  width: 1px;
  height: 80%;
  align-self: center;
  background: linear-gradient(to bottom, transparent, var(--primary-color), var(--secondary-color), transparent);
  margin: 0 10px;
  position: relative;
  z-index: 2;
  opacity: 0.3;
}

.resource-item a {
  display: flex;
  align-items: center;
  padding: 25px;
  border-radius: 15px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(250, 250, 255, 0.95));
  text-decoration: none;
  color: var(--text-color);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.8);
}

.resource-item-left a {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(250, 250, 255, 0.9));
}

.resource-item-right a {
  background: linear-gradient(135deg, rgba(250, 250, 255, 0.9), rgba(255, 255, 255, 0.95));
}

.resource-item a:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1), 0 0 15px var(--primary-glow);
}

.resource-item a:before {
  content: '';
  position: absolute;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.5),
    transparent
  );
  top: 0;
  left: -100%;
  transition: left 0.6s ease;
  will-change: left;
}

.resource-item a:hover:before {
  left: 150%;
}

.resource-item-left a:hover {
  background: linear-gradient(135deg, rgba(49, 194, 124, 0.05), rgba(108, 92, 231, 0.1));
}

.resource-item-right a:hover {
  background: linear-gradient(135deg, rgba(108, 92, 231, 0.1), rgba(49, 194, 124, 0.05));
}

.resource-icon {
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 15px;
  background: var(--gradient-2);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1), 0 0 10px var(--secondary-glow);
  margin-right: 20px;
  position: relative;
  overflow: hidden;
}

.resource-icon:before {
  content: '';
  position: absolute;
  width: 150%;
  height: 150%;
  background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.8), transparent);
  top: -100%;
  left: -100%;
  transform: rotate(45deg);
  transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
}

.resource-item a:hover .resource-icon:before {
  top: 100%;
  left: 100%;
}

.resource-icon i {
  font-size: 1.6rem;
  color: white;
  z-index: 1;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
  will-change: transform;
}

.resource-info {
  flex: 1;
}

.resource-info h3 {
  font-size: 1.4rem;
  margin: 0 0 5px;
  font-weight: 500;
  color: var(--text-color);
  transition: all 0.3s ease;
  letter-spacing: 1px;
  position: relative;
  display: inline-block;
}

.resource-info h3:after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -5px;
  width: 0;
  height: 2px;
  background: var(--gradient-2);
  transition: width 0.3s ease;
  will-change: width;
}

.resource-item a:hover .resource-info h3:after {
  width: 100%;
}

.resource-info p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-secondary);
  transition: all 0.3s ease;
  letter-spacing: 0.5px;
}

.resource-item a:hover .resource-info h3 {
  color: var(--secondary-color);
  text-shadow: 0 0 5px var(--secondary-glow);
}

.resource-item a:hover .resource-info p {
  color: var(--text-color);
}

/* 优化移动端性能 */
@media (max-width: 768px) {
  .neo-player {
    margin: 15px;
    padding: 15px;
  }
  
  .music-info {
    flex-direction: column;
    align-items: center;
    text-align: center;
    animation: none; /* 禁用可能导致移动端卡顿的动画 */
  }
  
  .album-cover {
    width: 150px;
    height: 150px;
    margin-bottom: 20px;
    animation: none; /* 禁用可能导致移动端卡顿的动画 */
  }
  
  .control-buttons {
    flex-wrap: wrap;
    gap: 15px;
  }
  
  .control-btn::after {
    display: none; /* 移动端不显示提示 */
  }
  
  .resources-container {
    flex-direction: column;
    animation: none; /* 禁用可能导致移动端卡顿的动画 */
  }
  
  .resource-divider {
    width: 80%;
    height: 1px;
    margin: 10px auto;
  }
  
  .resource-item {
    width: 100%;
  }
  
  /* 移动端禁用复杂动画，提高性能 */
  .light-effects {
    animation: none;
    opacity: 0.2;
  }
  
  .visualizer {
    display: none;
  }
  
  .progress:after {
    animation: none;
  }
  
  .play-btn:before {
    animation: none;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 获取DOM元素
  const playBtn = document.getElementById('play');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const randomBtn = document.getElementById('random');
  const loopBtn = document.getElementById('loop');
  const volumeBtn = document.getElementById('volume-btn');
  const volumeSlider = document.getElementById('volume');
  const progress = document.querySelector('.progress');
  const progressHandle = document.querySelector('.progress-handle');
  const progressContainer = document.querySelector('.progress-bar');
  const progressHoverTime = document.querySelector('.progress-hover-time');
  const currentTimeEl = document.getElementById('current-time');
  const durationEl = document.getElementById('duration');
  const title = document.getElementById('music-title');
  const artist = document.getElementById('music-artist');
  const cover = document.getElementById('album-cover');
  const playlistEl = document.getElementById('playlist');
  const musicInfo = document.querySelector('.music-info');
  const playlistCount = document.querySelector('.playlist-count');
  
  // 创建音频对象
  const audio = new Audio();
  
  // 音乐列表
  const musicList = [
    {
      title: '7 Years',
      artist: 'Lukas Graham',
      path: '/music/7 years.mp3',
      cover: 'https://picsum.photos/id/10/200'
    },
    {
      title: 'Pop',
      artist: 'Various Artists',
      path: '/music/pop.mp3',
      cover: 'https://picsum.photos/id/20/200'
    },
    {
      title: 'Time',
      artist: 'Hans Zimmer',
      path: '/music/time.mp3',
      cover: 'https://picsum.photos/id/30/200'
    },
    {
      title: 'Shed a Light',
      artist: 'Robin Schulz & David Guetta',
      path: '/music/shed a light.mp3',
      cover: 'https://picsum.photos/id/40/200'
    },
    {
      title: '白月光和朱砂痣',
      artist: '大籽',
      path: '/music/白月光和朱砂痣.mp3',
      cover: 'https://picsum.photos/id/50/200'
    },
    {
      title: 'Counting Stars',
      artist: 'OneRepublic',
      path: '/music/counting stars.mp3',
      cover: 'https://picsum.photos/id/60/200'
    },
    {
      title: 'Star Sky',
      artist: 'Two Steps From Hell',
      path: '/music/star sky.mp3',
      cover: 'https://picsum.photos/id/70/200'
    },
    {
      title: 'Something Just Like This',
      artist: 'The Chainsmokers & Coldplay',
      path: '/music/Something just like this.mp3',
      cover: 'https://picsum.photos/id/80/200'
    },
    {
      title: '飞鸟和蝉',
      artist: '任然',
      path: '/music/飞鸟和蝉.mp3',
      cover: 'https://picsum.photos/id/90/200'
    },
    {
      title: 'Waiting For Love',
      artist: 'Avicii',
      path: '/music/waiting  for love.mp3',
      cover: 'https://picsum.photos/id/100/200'
    },
    {
      title: '穿越火线',
      artist: 'Various Artists',
      path: '/music/穿越火线.mp3',
      cover: 'https://picsum.photos/id/110/200'
    },
    {
      title: '离别开出花',
      artist: '就是南方凯（项学凯）',
      path: '/music/离别开出花.mp3',
      cover: 'https://picsum.photos/id/120/200'
    },
    {
      title: '奢香夫人',
      artist: '凤凰传奇',
      path: '/music/奢香夫人.mp3',
      cover: 'https://picsum.photos/id/130/200'
    }
  ];
  
  // 状态变量
  let musicIndex = 0;            // 当前播放索引
  let isRandom = false;          // 随机播放状态
  let isLoop = false;            // 循环播放状态
  let isDraggingProgressBar = false;
  let progressBarWasPlaying = false;
  let currentTime = 0;           // 当前播放时间
  let duration = 0;              // 总时长
  let volumeBeforeMute = 0.7;    // 静音前的音量
  
  // 初始化
  function init() {
    loadMusic(musicIndex);
    createPlaylist();
    
    // 设置初始音量
    audio.volume = volumeSlider.value / 100;
    
    // 添加事件监听
    setupEventListeners();
    
    // 显示播放列表数量
    playlistCount.textContent = `(${musicList.length})`;
    
    // 初始化进度条预览
    initProgressPreview();
  }
  
  // 设置事件监听器
  function setupEventListeners() {
    // 播放控制按钮
    playBtn.addEventListener('click', togglePlay);
    prevBtn.addEventListener('click', prevSong);
    nextBtn.addEventListener('click', nextSong);
    randomBtn.addEventListener('click', toggleRandom);
    loopBtn.addEventListener('click', toggleLoop);
    
    // 音量控制
    volumeBtn.addEventListener('click', toggleMute);
    volumeSlider.addEventListener('input', setVolume);
    
    // 音频事件
    audio.addEventListener('timeupdate', audioTimeUpdateHandler);
    audio.addEventListener('ended', songEnded);
    audio.addEventListener('loadedmetadata', () => {
      duration = audio.duration;
      updateDuration();
    });
    
    // --- 设置进度条监听器 ---
    setupProgressBarListeners();
    
    // 键盘快捷键支持
    document.addEventListener('keydown', handleKeyboardShortcuts);
  }
  
  // --- 进度条逻辑 --- 
  function setupProgressBarListeners() {
    // 点击事件
    progressContainer.addEventListener('click', (e) => {
      // 短暂延迟后检查拖动标志，避免拖动结束时误触发点击
      setTimeout(() => {
        if (isDraggingProgressBar) return;
        
        if (!isNaN(audio.duration)) {
          const rect = progressContainer.getBoundingClientRect();
          const pos = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
          const targetTime = pos * audio.duration;
          const wasPaused = audio.paused;
          
          audio.currentTime = targetTime;
          updateProgressUI(pos * 100); // Update UI immediately
          
          // If it was paused by the click somehow, resume if needed
          if (wasPaused && !audio.paused) {
            // It resumed automatically, good.
          } else if (!wasPaused && audio.paused) {
            // It paused unexpectedly, try to resume
            audio.play().catch(err => console.error("Click play error:", err));
          }
        }
      }, 50); // Small delay to let drag flag reset if needed
    });

    // 拖动开始 (Mouse & Touch)
    const handleDragStart = (e) => {
      if (e.type === 'mousedown' && e.button !== 0) return; // Only left click
      if (isNaN(audio.duration) || audio.duration <= 0) return; // No duration

      e.preventDefault();
      isDraggingProgressBar = true;
      progressBarWasPlaying = !audio.paused;
      progressContainer.classList.add('active');
      document.body.style.cursor = 'grabbing';

      if (progressBarWasPlaying) {
        audio.pause();
      }
      
      // Calculate initial position
      updateTargetTimeFromEvent(e);
      updateProgressUI((currentTime / duration) * 100);

      // Add move and end listeners to the document
      document.addEventListener('mousemove', handleDragMove);
      document.addEventListener('mouseup', handleDragEnd);
      document.addEventListener('touchmove', handleDragMove, { passive: false });
      document.addEventListener('touchend', handleDragEnd);
    };

    // 拖动中 (Mouse & Touch)
    const handleDragMove = (e) => {
      if (!isDraggingProgressBar) return;
      e.preventDefault();
      
      updateTargetTimeFromEvent(e);
      updateProgressUI((currentTime / duration) * 100); // Update UI only
    };

    // 拖动结束 (Mouse & Touch)
    const handleDragEnd = () => {
      if (!isDraggingProgressBar) return;

      // Set final audio time
      audio.currentTime = currentTime;

      // Resume playback if needed
      if (progressBarWasPlaying) {
        // Use timeout to ensure currentTime is processed
        setTimeout(() => {
          audio.play().catch(err => console.error("Drag end play error:", err));
        }, 50);
      }

      // Cleanup
      progressContainer.classList.remove('active');
      document.body.style.cursor = '';
      document.removeEventListener('mousemove', handleDragMove);
      document.removeEventListener('mouseup', handleDragEnd);
      document.removeEventListener('touchmove', handleDragMove);
      document.removeEventListener('touchend', handleDragEnd);
      
      // Reset drag flag after a short delay to help click detection
      setTimeout(() => {
        isDraggingProgressBar = false;
      }, 50);
    };

    // 从事件更新目标时间 (但不设置 audio.currentTime)
    const updateTargetTimeFromEvent = (e) => {
      const rect = progressContainer.getBoundingClientRect();
      let clientX;
      if (e.type.includes('touch')) {
        clientX = (e.touches[0] || e.changedTouches[0]).clientX;
      } else {
        clientX = e.clientX;
      }
      const pos = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
      currentTime = pos * duration; // Update the global target time
      updateCurrentTimeDisplayOnly(currentTime); // Update UI time display
    };

    // 更新进度条UI
    const updateProgressUI = (percent) => {
      if (isNaN(percent)) return;
      progress.style.width = `${percent}%`;
      progressHandle.style.left = `${percent}%`;
    };

    // 更新UI时间显示
    const updateCurrentTimeDisplayOnly = (time) => {
      if (isNaN(time)) return;
      const minutes = Math.floor(time / 60);
      const seconds = Math.floor(time % 60);
      currentTimeEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }
    
    // 添加初始监听器
    progressContainer.addEventListener('mousedown', handleDragStart);
    progressContainer.addEventListener('touchstart', handleDragStart, { passive: false });
  }

  // 音频时间更新处理 - 仅在非拖动时更新
  function audioTimeUpdateHandler() {
    if (!isDraggingProgressBar && !isNaN(audio.duration)) {
      currentTime = audio.currentTime; // Update global currentTime
      const progressPercent = (currentTime / audio.duration) * 100;
      // Directly call UI update
      progress.style.width = `${progressPercent}%`;
      progressHandle.style.left = `${progressPercent}%`;
      // Update UI time display
      const minutes = Math.floor(currentTime / 60);
      const seconds = Math.floor(currentTime % 60);
      currentTimeEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }
  }

  // 更新当前时间显示
  function updateCurrentTime() {
    // This function might still be called by other parts, 
    // ensure it uses the display-only helper if needed or is removed.
    // Let's keep it simple for now, time display is handled elsewhere.
  }
  function updateProgress() {
    // This function is likely redundant now.
  }

  // 加载音乐
  function loadMusic(index) {
    const music = musicList[index];
    
    title.textContent = music.title;
    artist.textContent = music.artist;
    cover.src = music.cover;
    audio.src = music.path;
    
    updatePlaylistActiveItem();
  }
  
  // 创建播放列表
  function createPlaylist() {
    playlistEl.innerHTML = '';
    
    musicList.forEach((music, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <div class="song-index">${index + 1}</div>
        <div class="song-info">
          <div class="song-name">${music.title}</div>
          <div class="song-artist">${music.artist}</div>
        </div>
        <div class="song-duration">--:--</div>
      `;
      li.dataset.index = index;
      
      if (index === musicIndex) {
        li.classList.add('active');
      }
      
      li.addEventListener('click', () => {
        musicIndex = parseInt(li.dataset.index);
        loadMusic(musicIndex);
        playMusic();
      });
      
      // 预加载音频时长
      const tempAudio = new Audio(music.path);
      tempAudio.addEventListener('loadedmetadata', () => {
        const durationMin = Math.floor(tempAudio.duration / 60);
        const durationSec = Math.floor(tempAudio.duration % 60);
        const durationEl = li.querySelector('.song-duration');
        durationEl.textContent = `${durationMin}:${durationSec < 10 ? '0' : ''}${durationSec}`;
      });
      
      playlistEl.appendChild(li);
    });
  }
  
  // 更新播放列表中的活动项
  function updatePlaylistActiveItem() {
    const items = playlistEl.querySelectorAll('li');
    
    items.forEach(item => {
      item.classList.remove('active');
      if (parseInt(item.dataset.index) === musicIndex) {
        item.classList.add('active');
        item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    });
  }
  
  // 播放/暂停切换
  function togglePlay() {
    if (audio.paused) {
      playMusic();
    } else {
      pauseMusic();
    }
  }
  
  // 播放音乐
  function playMusic() {
    musicInfo.classList.add('playing');
    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
    
    // 播放音频
    const playPromise = audio.play();
    
    // 处理播放延迟和错误
    if (playPromise !== undefined) {
      playPromise.catch(error => {
        console.error('播放失败:', error);
        pauseMusic();
      });
    }
  }
  
  // 暂停音乐
  function pauseMusic() {
    musicInfo.classList.remove('playing');
    playBtn.innerHTML = '<i class="fas fa-play"></i>';
    audio.pause();
  }
  
  // 上一首
  function prevSong() {
    if (isRandom) {
      randomSong();
    } else {
      musicIndex = (musicIndex - 1 + musicList.length) % musicList.length;
      loadMusic(musicIndex);
      playMusic();
    }
  }
  
  // 下一首
  function nextSong() {
    if (isRandom) {
      randomSong();
    } else {
      musicIndex = (musicIndex + 1) % musicList.length;
      loadMusic(musicIndex);
      playMusic();
    }
  }
  
  // 随机歌曲
  function randomSong() {
    let newIndex;
    do {
      newIndex = Math.floor(Math.random() * musicList.length);
    } while (newIndex === musicIndex && musicList.length > 1);
    
    musicIndex = newIndex;
    loadMusic(musicIndex);
    playMusic();
  }
  
  // 歌曲结束时处理
  function songEnded() {
    if (isLoop) {
      audio.currentTime = 0;
      playMusic();
    } else {
      nextSong();
    }
  }
  
  // 切换随机播放
  function toggleRandom() {
    isRandom = !isRandom;
    randomBtn.classList.toggle('active', isRandom);
    
    // 显示反馈
    showButtonFeedback(randomBtn, isRandom ? '随机播放: 开启' : '随机播放: 关闭');
  }
  
  // 切换循环播放
  function toggleLoop() {
    isLoop = !isLoop;
    loopBtn.classList.toggle('active', isLoop);
    
    // 显示反馈
    showButtonFeedback(loopBtn, isLoop ? '循环播放: 开启' : '循环播放: 关闭');
  }
  
  // 切换静音
  function toggleMute() {
    if (audio.volume > 0) {
      volumeBeforeMute = audio.volume;
      audio.volume = 0;
      volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
      volumeSlider.value = 0;
      
      showButtonFeedback(volumeBtn, '静音');
    } else {
      audio.volume = volumeBeforeMute;
      updateVolumeIcon(volumeBeforeMute * 100);
      volumeSlider.value = volumeBeforeMute * 100;
      
      showButtonFeedback(volumeBtn, '恢复音量');
    }
  }
  
  // 设置音量
  function setVolume() {
    const value = volumeSlider.value;
    audio.volume = value / 100;
    updateVolumeIcon(value);
  }
  
  // 更新音量图标
  function updateVolumeIcon(value) {
    if (value > 50) {
      volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
    } else if (value > 0) {
      volumeBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
    } else {
      volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
    }
  }
  
  // 更新总时长显示
  function updateDuration() {
    if (!isNaN(duration)) {
      const minutes = Math.floor(duration / 60);
      const seconds = Math.floor(duration % 60);
      durationEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }
  }
  
  // 处理键盘快捷键
  function handleKeyboardShortcuts(e) {
    // 仅当焦点不在输入区域时响应
    if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
      switch(e.code) {
        case 'Space':
          e.preventDefault();
          togglePlay();
          break;
        case 'ArrowRight':
          // 快进 5 秒
          if (!isNaN(audio.duration)) {
            audio.currentTime = Math.min(audio.currentTime + 5, audio.duration);
          }
          break;
        case 'ArrowLeft':
          // 后退 5 秒
          audio.currentTime = Math.max(audio.currentTime - 5, 0);
          break;
        case 'ArrowUp':
          // 增加音量
          volumeSlider.value = Math.min(parseInt(volumeSlider.value) + 10, 100);
          setVolume();
          break;
        case 'ArrowDown':
          // 减小音量
          volumeSlider.value = Math.max(parseInt(volumeSlider.value) - 10, 0);
          setVolume();
          break;
        case 'KeyM':
          // 静音
          toggleMute();
          break;
        case 'KeyR':
          // 随机播放
          toggleRandom();
          break;
        case 'KeyL':
          // 循环播放
          toggleLoop();
          break;
      }
    }
  }
  
  // 显示按钮反馈
  function showButtonFeedback(button, message) {
    // 创建反馈元素
    const feedback = document.createElement('div');
    feedback.className = 'button-feedback';
    feedback.textContent = message;
    feedback.style.cssText = `
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
    `;
    
    // 添加到按钮
    button.style.position = 'relative';
    button.appendChild(feedback);
    
    // 显示反馈
    setTimeout(() => {
      feedback.style.opacity = '1';
    }, 10);
    
    // 移除反馈
    setTimeout(() => {
      feedback.style.opacity = '0';
      setTimeout(() => {
        button.removeChild(feedback);
      }, 300);
    }, 1500);
  }
  
  // 初始化
  init();
});
</script>



  

</article>



              </div>
            </div>
          </div>
        </div>
      </div>
    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <div class="footer-content"> <div class="footer-item"> <span class="motto rainbow-text"><i class="fas fa-quote-left quote-icon"></i> Powered by k卷 <i class="fas fa-quote-right quote-icon"></i> | <i class="far fa-copyright"></i> All rights reserved</span> </div> <div class="footer-item"> <div class="website-runtime"> <span class="rainbow-text"><i class="far fa-clock"></i> 本站已运行</span> <span class="run-time" id="website-runtime"></span> </div> </div> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        <i class="iconfont icon-eye-fill"></i> <span class="rainbow-text">总访问量</span> 
        <span id="busuanzi_value_site_pv"></span>
         <span class="rainbow-text">次</span>
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        <i class="iconfont icon-user-fill"></i> <span class="rainbow-text">总访客数</span> 
        <span id="busuanzi_value_site_uv"></span>
         <span class="rainbow-text">人</span>
      </span>
    
    

  

</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      京ICP备 00001号
    </a>
  </span>
  
    
      <span>
        <a
          href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=10086"
          rel="nofollow noopener"
          class="beian-police"
          target="_blank"
        >
          
            <span style="visibility: hidden; width: 0">|</span>
            <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
          
          <span>京公网安备10086号</span>
        </a>
      </span>
    
  
</div>

  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/js/custom.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
