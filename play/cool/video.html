<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://player.bilibili.com" crossorigin="anonymous">
    <link rel="dns-prefetch" href="https://player.bilibili.com">
    <title>KÂç∑ÂΩ±Èô¢ - Â•áÂ¶ô‰πãÊóÖ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
        crossorigin="anonymous">
    <meta name="description" content="KÂç∑ÂΩ±Èô¢ - Á≤æÈÄâÈ°∂Á∫ßÂΩ±ÂÉèÂÜÖÂÆπÔºåÊâìÈÄ†ÈúáÊíºËßÜËßâ‰ΩìÈ™å">
    <meta name="keywords" content="KÂç∑ÂΩ±Èô¢,Âú®Á∫øËßÇÂΩ±,ÁîµÂΩ±,ÁîµËßÜÂâß,Âä®Êº´,È´òÊ∏Ö">
    <meta name="theme-color" content="#6d28d9">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
    <style>
        :root {
            --primary: linear-gradient(135deg, #6d28d9 0%, #4f46e5 100%);
            --secondary: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
            --accent: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
            --success: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --warning: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);

            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-dark: #0f172a;
            --bg-card: rgba(30, 41, 59, 0.95);
            --bg-glass: rgba(255, 255, 255, 0.1);

            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-light: #ffffff;

            --border-light: rgba(71, 85, 105, 0.3);
            --border-glass: rgba(255, 255, 255, 0.2);

            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 8px 25px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);

            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;

            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition);
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            pointer-events: none;
            z-index: -2;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 20%, rgba(79, 70, 229, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(109, 40, 217, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%);
            pointer-events: none;
            z-index: -1;
        }

        .dark-mode {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-card: rgba(31, 41, 55, 0.95);
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-light: rgba(75, 85, 99, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ÂØºËà™Ê†è */
        .navbar {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-light);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .navbar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-1px);
        }

        .logo i {
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: glow 2s infinite;
            filter: drop-shadow(0 0 2px rgba(109, 40, 217, 0.5));
        }

        @keyframes glow {

            0%,
            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 2px rgba(109, 40, 217, 0.5));
            }

            50% {
                transform: scale(1.05);
                filter: drop-shadow(0 0 5px rgba(109, 40, 217, 0.8));
            }
        }

        .nav-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        /* ÊåâÈíÆÊ†∑Âºè */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--text-light);
            box-shadow: var(--shadow-md);
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: translateX(-100%);
            transition: 0.6s;
            z-index: -1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:hover::before {
            transform: translateX(100%);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            transform: translateY(-1px);
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            padding: 0;
            justify-content: center;
        }

        /* Ëã±ÈõÑÂå∫ */
        .hero {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(109, 40, 217, 0.05) 100%);
            padding: 60px 0;
            text-align: center;
            border-radius: 0 0 var(--radius-xl) var(--radius-xl);
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg at 50% 50%, rgba(109, 40, 217, 0) 0deg, rgba(109, 40, 217, 0.05) 180deg, rgba(109, 40, 217, 0) 360deg);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .hero h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 16px;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: fadeInUp 0.8s ease;
            text-shadow: 0 0 15px rgba(109, 40, 217, 0.3);
            letter-spacing: -0.5px;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 32px;
            animation: fadeInUp 0.8s ease 0.1s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        /* ‰∏ªÂ∏ÉÂ±Ä */
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 32px;
            padding-bottom: 60px;
        }

        /* ‰æßËæπÊ†è */
        .sidebar {
            position: sticky;
            top: 120px;
            height: fit-content;
        }

        .sidebar-section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .sidebar-section:hover {
            box-shadow: var(--shadow-md);
        }

        .sidebar-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
        }

        .sidebar-title i {
            background: var(--accent);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .category-list {
            list-style: none;
        }

        .category-item {
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 4px;
            transition: var(--transition);
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .category-item:hover {
            background: rgba(102, 126, 234, 0.1);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .category-item.active {
            background: var(--primary);
            color: var(--text-light);
            box-shadow: var(--shadow-sm);
        }

        .category-item i {
            font-size: 1rem;
        }

        /* ÂΩ±Èô¢Âå∫Âüü */
        .theater-section {
            display: grid;
            gap: 24px;
            will-change: transform;
        }

        .theater {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .theater:hover {
            box-shadow: var(--shadow-md);
        }

        .theater-header {
            padding: 20px 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .theater-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }

        .theater-header:hover::after {
            left: 100%;
        }

        .theater-header:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .theater-header.active {
            background: var(--primary);
            color: var(--text-light);
        }

        .theater-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .theater-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .theater-header:not(.active) .theater-icon {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .theater-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .theater-header.active .theater-toggle {
            transform: rotate(180deg);
        }

        .theater-content {
            display: none;
        }

        .theater-content.active {
            display: block;
        }

        .theater-video {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            background: #000;
            will-change: transform;
            transform: translateZ(0);
        }

        .theater-video iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            will-change: opacity;
            opacity: 0;
            transition: opacity 0.3s ease;
            background-color: #000;
        }

        .theater-video iframe.loaded {
            opacity: 1;
        }

        /* Ê∑ªÂä†ËÑâÂÜ≤Âä®ÁîªÊïàÊûú */
        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(109, 40, 217, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(109, 40, 217, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(109, 40, 217, 0);
            }
        }

        .video-controls {
            padding: 20px 24px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            background: var(--bg-secondary);
        }

        .video-btn {
            background: var(--bg-card);
            color: var(--text-secondary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 8px 16px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .video-btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .video-btn.active {
            background: var(--primary);
            color: var(--text-light);
            border-color: transparent;
            box-shadow: var(--shadow-sm);
        }

        /* Â§ñÈÉ®ÈìæÊé• */
        .external-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            padding: 24px;
        }

        .external-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--text-primary);
            border: 1px solid var(--border-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .external-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary);
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
            border-radius: var(--radius-md);
            box-shadow: 0 0 20px rgba(109, 40, 217, 0.5);
        }

        .external-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            color: var(--text-light);
        }

        .external-card:hover::before {
            opacity: 1;
        }

        .external-icon {
            font-size: 2rem;
            margin-bottom: 12px;
            transition: var(--transition);
        }

        .external-card:hover .external-icon {
            transform: scale(1.1);
        }

        .external-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .external-desc {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* ÈÄöÁü• */
        .notification {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--bg-card);
            color: var(--text-primary);
            padding: 16px 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            opacity: 0;
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 1000;
            backdrop-filter: blur(20px);
            max-width: 300px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* ËßÜËßâÊïàÊûú */
        .popcorn {
            position: fixed;
            font-size: 20px;
            animation: popcorn 2s ease-in-out;
            z-index: 1000;
            pointer-events: none;
        }

        @keyframes popcorn {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-60px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }

        .loading-spinner {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .loading-spinner::before,
        .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
        }

        .loading-spinner::before {
            width: 100%;
            height: 100%;
            background-image: linear-gradient(0deg, #6d28d9 0%, #4f46e5 100%);
            animation: spin 1s infinite linear;
        }

        .loading-spinner::after {
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: var(--bg-primary);
            border: 3px solid var(--bg-primary);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .sidebar {
                position: static;
            }

            .sidebar-section {
                display: none;
            }

            .sidebar-section:first-child {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .nav-buttons {
                gap: 4px;
            }

            .btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }

            .external-links {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- ËÉåÊôØÈü≥‰πê -->
    <audio id="bgMusic" loop>
        <source src="/music/Ê∏îËàüÂî±Êôö.mp3" type="audio/mpeg">
    </audio>

    <div class="loading">
        <div class="loading-spinner"></div>
        <div
            style="position: absolute; margin-top: 80px; font-weight: 600; letter-spacing: 1px; color: var(--text-primary);">
            KÂç∑ÂΩ±Èô¢</div>
    </div>

    <!-- ÂØºËà™Ê†è -->
    <nav class="navbar">
        <div class="container navbar-container">
            <a href="#" class="logo">
                <i class="bi bi-film"></i> KÂç∑ÂΩ±Èô¢
            </a>
            <div class="nav-buttons">
                <button id="darkModeBtn" class="btn btn-secondary btn-icon" title="ÂàáÊç¢Â§úÈó¥Ê®°Âºè">
                    <i class="bi bi-moon-stars"></i>
                </button>
                <button id="randomBtn" class="btn btn-secondary">
                    <i class="bi bi-shuffle"></i> ÈöèÊú∫
                </button>
                <button id="fullscreenBtn" class="btn btn-secondary btn-icon" title="ÂÖ®Â±èÊ®°Âºè">
                    <i class="bi bi-arrows-fullscreen"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Ëã±ÈõÑÂå∫ -->
    <section class="hero">
        <div class="container">
            <h1>ËßÜËßâÁõõÂÆ¥ÔºåÈúáÊíº‰ΩìÈ™åÔºÅ</h1>
            <p>‰∏ÄÊääÁìúÂ≠êÔºåÂóëÂá∫ÁôæÂë≥‰∫∫Áîü</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="playRandomVideo()">
                    <i class="bi bi-play-fill"></i> Á´ãÂç≥ËßÇÁúã
                </button>
                <button class="btn btn-secondary" onclick="showPopcorn()">
                    <i class="bi bi-cup-hot"></i> Êù•‰ªΩÁàÜÁ±≥Ëä±
                </button>
                <button id="musicBtn" class="btn btn-secondary" onclick="toggleMusic()">
                    <i class="bi bi-music-note-beamed"></i> ËÉåÊôØÈü≥‰πê
                </button>
            </div>
        </div>
    </section>

    <!-- ‰∏ªÂ∏ÉÂ±Ä -->
    <div class="container">
        <div class="main-layout">
            <!-- ‰æßËæπÊ†è -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="bi bi-collection-play"></i> ÂΩ±ÁâáÂàÜÁ±ª
                    </h3>
                    <ul class="category-list">
                        <li class="category-item active" data-target="hakone-theater">
                            <i class="bi bi-trophy"></i> ÁÆ±Ê†πÈ©ø‰º†
                        </li>
                        <li class="category-item" data-target="exotic-theater">
                            <i class="bi bi-globe"></i> ÂºÇÂüüÈ£éÊÉÖ
                        </li>
                        <li class="category-item" data-target="battle-theater">
                            <i class="bi bi-lightning"></i> Ë∂ÖÁáÉÊàòÊñó
                        </li>
                        <li class="category-item" data-target="chess-theater">
                            <i class="bi bi-grid-3x3"></i> ÂõõÈÉéËÆ≤Ê£ã
                        </li>
                        <li class="category-item" data-target="treasure-theater">
                            <i class="bi bi-gem"></i> ÈïáÁ´ô‰πãÂÆù
                        </li>
                        <li class="category-item" data-target="enjoy-theater">
                            <i class="bi bi-link-45deg"></i> Êõ¥Â§öËµÑÊ∫ê
                        </li>
                    </ul>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="bi bi-info-circle"></i> ÂÖ≥‰∫éÂΩ±Èô¢
                    </h3>
                    <p style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">
                        K Âç∑ÂΩ±Èô¢ÔºåÁ≤æÂøÉÁîÑÈÄâÊµ∑Èáè‰ºòË¥®ËßÜÈ¢ëÂÜÖÂÆπÔºå‰∏∫ÊÇ®ÊâìÈÄ†‰∏ÄÂú∫Ê≤âÊµ∏ÂºèÁöÑÊûÅËá¥ËßÇÂΩ±‰ΩìÈ™åÔºå‰ªø‰ΩõÁΩÆË∫´‰∫éÊ¢¶ÂπªËà¨ÁöÑÁîµÂΩ±‰∏ñÁïå„ÄÇ
                        <br><br>
                        ÊÑüË∞¢pipedream..ÁöÑ‰∏ÄË∑ØÂè≠Âè≠
                    </p>
                    <p style="margin-top: 12px; font-size: 0.75rem; color: var(--text-secondary);">
                        Êõ¥Êñ∞Êó•Êúü: 2025-06-15
                    </p>
                </div>
            </aside>

            <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
            <main class="theater-section">
                <!-- 1Âè∑ÂéÖÔºöÁÆ±Ê†πÈ©ø‰º† -->
                <div id="hakone-theater" class="theater">
                    <div class="theater-header active" onclick="toggleTheater('hakone-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-trophy"></i></div>
                            1Âè∑ÂéÖÔºöÁÆ±Ê†πÈ©ø‰º†ÔºåÈ£éÈ©∞ÁîµÊé£
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content active">
                        <div class="theater-video">
                            <iframe id="hakone-iframe"
                                src="https://player.bilibili.com/player.html?bvid=BV1vkrnYFEHZ&p=1&high_quality=1&danmaku=0"
                                allowfullscreen="true" sandbox="allow-scripts allow-same-origin"
                                loading="lazy"></iframe>
                        </div>
                        <div class="video-controls">
                            <button class="video-btn active" onclick="changeVideo('hakone-theater', 0)">Á¨¨‰∏ÄÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('hakone-theater', 1)">Á¨¨‰∫åÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('hakone-theater', 2)">Á¨¨‰∏âÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('hakone-theater', 3)">Á¨¨ÂõõÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('hakone-theater', 4)">Á¨¨‰∫îÈõÜ</button>
                        </div>
                    </div>
                </div>

                <!-- 2Âè∑ÂéÖÔºöÂºÇÂüüÈ£éÊÉÖ -->
                <div id="exotic-theater" class="theater">
                    <div class="theater-header" onclick="toggleTheater('exotic-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-globe"></i></div>
                            2Âè∑ÂéÖÔºöÂºÇÂüüÈ£éÊÉÖÔºåÂΩºÂ≤∏‰πãÊÅØ
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content">
                        <div class="theater-video">
                            <iframe id="exotic-iframe"
                                src="https://player.bilibili.com/player.html?bvid=BV1pK411u7y6&p=1&high_quality=1&danmaku=0"
                                allowfullscreen="true" sandbox="allow-scripts allow-same-origin"
                                loading="lazy"></iframe>
                        </div>
                        <div class="video-controls">
                            <button class="video-btn active" onclick="changeVideo('exotic-theater', 0)">Á¨¨‰∏ÄÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('exotic-theater', 1)">Á¨¨‰∫åÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('exotic-theater', 2)">Á¨¨‰∏âÈõÜ</button>
                        </div>
                    </div>
                </div>

                <!-- 3Âè∑ÂéÖÔºöË∂ÖÁáÉÊàòÊñó -->
                <div id="battle-theater" class="theater">
                    <div class="theater-header" onclick="toggleTheater('battle-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-lightning"></i></div>
                            3Âè∑ÂéÖÔºöË∂ÖÁáÉÊàòÊñóÔºåÁîµÂÖâÁü≥ÁÅ´
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content">
                        <div class="theater-video">
                            <iframe id="battle-iframe"
                                src="https://player.bilibili.com/player.html?bvid=BV1wx411e71v&p=1&high_quality=1&danmaku=0"
                                allowfullscreen="true" sandbox="allow-scripts allow-same-origin"
                                loading="lazy"></iframe>
                        </div>
                        <div class="video-controls">
                            <button class="video-btn active" onclick="changeVideo('battle-theater', 0)">Á¨¨‰∏ÄÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('battle-theater', 1)">Á¨¨‰∫åÈõÜ</button>
                            <button class="video-btn" onclick="changeVideo('battle-theater', 2)">Á¨¨‰∏âÈõÜ</button>
                        </div>
                    </div>
                </div>

                <!-- 4Âè∑ÂéÖÔºöÂõõÈÉéËÆ≤Ê£ã -->
                <div id="chess-theater" class="theater">
                    <div class="theater-header" onclick="toggleTheater('chess-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-grid-3x3"></i></div>
                            4Âè∑ÂéÖÔºöÂõõÈÉéËÆ≤Ê£ãÔºåÁ∫µÊ®™Êç≠Èòñ
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content">
                        <div class="theater-video">
                            <iframe id="chess-iframe"
                                src="https://player.bilibili.com/player.html?bvid=BV1Ry4y1k7pc&p=1&high_quality=1&danmaku=0"
                                allowfullscreen="true" sandbox="allow-scripts allow-same-origin"
                                loading="lazy"></iframe>
                        </div>
                        <div class="video-controls">
                            <button class="video-btn active" onclick="changeVideo('chess-theater', 0)">ÂçïÈ©¨ÊìíÁéã</button>
                            <button class="video-btn" onclick="changeVideo('chess-theater', 1)">Ê£ãÁéãÊùØ</button>
                            <button class="video-btn" onclick="changeVideo('chess-theater', 2)">‰∫îÁæäÊùØ</button>
                            <button class="video-btn" onclick="changeVideo('chess-theater', 3)">ÊõπÂ≤©Á£ä‰∏ìËÆø</button>
                            <button class="video-btn" onclick="changeVideo('chess-theater', 4)">ÂÖ∞ÂÖ∞</button>
                        </div>
                    </div>
                </div>

                <!-- 5Âè∑ÂéÖÔºöÈïáÁ´ô‰πãÂÆù -->
                <div id="treasure-theater" class="theater">
                    <div class="theater-header" onclick="toggleTheater('treasure-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-gem"></i></div>
                            5Âè∑ÂéÖÔºöÈïáÁ´ô‰πãÂÆùÔºåÁªèÂÖ∏Ê∞∏ÊÅí
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content">
                        <div class="theater-video">
                            <iframe id="treasure-iframe"
                                src="https://player.bilibili.com/player.html?bvid=BV1yt4y1Q7SS&p=1&high_quality=1&danmaku=0"
                                allowfullscreen="true" sandbox="allow-scripts allow-same-origin"
                                loading="lazy"></iframe>
                        </div>
                        <div class="video-controls">
                            <button class="video-btn active" onclick="changeVideo('treasure-theater', 0)">ËÆ©Â≠êÂºπÈ£û</button>
                            <button class="video-btn" onclick="changeVideo('treasure-theater', 1)">Â§ßÂ®ÅÂ§©Èæô</button>
                            <button class="video-btn" onclick="changeVideo('treasure-theater', 2)">ÁãÇ‰∫∫Êó•ÂØÑ</button>
                            <button class="video-btn" onclick="changeVideo('treasure-theater', 3)">È¢ÜÂØºËÆ≤ËØù</button>
                            <button class="video-btn" onclick="changeVideo('treasure-theater', 4)">ÂêæËæàÊ•∑Ê®°</button>
                        </div>
                    </div>
                </div>

                <!-- 6Âè∑ÂéÖÔºöÊõ¥Â§öËµÑÊ∫ê -->
                <div id="enjoy-theater" class="theater">
                    <div class="theater-header" onclick="toggleTheater('enjoy-theater')">
                        <div class="theater-title">
                            <div class="theater-icon"><i class="bi bi-link-45deg"></i></div>
                            6Âè∑ÂéÖÔºöÊõ¥Â§öËµÑÊ∫ê
                        </div>
                        <div class="theater-toggle"><i class="bi bi-chevron-down"></i></div>
                    </div>
                    <div class="theater-content">
                        <div class="external-links">
                            <a href="https://cupfox.love/" target="_blank" class="external-card">
                                <div class="external-icon">ü¶ä</div>
                                <h3 class="external-title">Ëå∂ÊùØÁãê</h3>
                                <p class="external-desc">ÁâáËçíÂâßËçíÈÄüÊù•</p>
                            </a>
                            <a href="https://www.fofo11.com/" target="_blank" class="external-card">
                                <div class="external-icon">üé¨</div>
                                <h3 class="external-title">fofoÂΩ±Èô¢</h3>
                                <p class="external-desc">ÂÖçË¥πÂú®Á∫øÁúãÁîµÂΩ±</p>
                            </a>
                            <a href="https://www.xcyycn.com/" target="_blank" class="external-card">
                                <div class="external-icon">‚ú®</div>
                                <h3 class="external-title">ÊòüËæ∞ÂΩ±Èô¢</h3>
                                <p class="external-desc">ÂÖçË¥πÂú®Á∫øÁúãÁîµÂΩ±</p>
                            </a>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ÈÄöÁü•ÂÖÉÁ¥† -->
    <div id="notification" class="notification"></div>

    <script>
        // ÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜÂáΩÊï∞ - Áî®‰∫éÊçïËé∑ÊâÄÊúâÊú™Â§ÑÁêÜÁöÑÈîôËØØ
        window.onerror = function (message, source, lineno, colno, error) {
            // ÂøΩÁï•BÁ´ôÁõ∏ÂÖ≥ÈîôËØØ
            if (message && (
                message.includes('bili') ||
                message.includes('CORS') ||
                message.includes('cross-origin') ||
                message.includes('player') ||
                source.includes('player.bilibili.com') ||
                source.includes('bili')
            )) {
                return true; // ÈòªÊ≠¢ÈîôËØØÂÜíÊ≥°
            }
            return false; // ÂÖ∂‰ªñÈîôËØØÊ≠£Â∏∏Â§ÑÁêÜ
        };

        // ËßÜÈ¢ëÈÖçÁΩÆ - ‰ΩøÁî®Â§áÈÄâËßÜÈ¢ëÊ∫êÔºåÈÅøÂÖç429ÈîôËØØ
        const videoConfig = {
            'hakone-theater': {
                videos: ['BV1vkrnYFEHZ', 'BV1NBwVeGEyJ', 'BV14D4y1F7cg', 'BV1b5411z7vC', 'BV1Kb421Y7vb'],
                titles: ['Á¨¨‰∏ÄÈõÜ', 'Á¨¨‰∫åÈõÜ', 'Á¨¨‰∏âÈõÜ', 'Á¨¨ÂõõÈõÜ', 'Á¨¨‰∫îÈõÜ'],
                // Ê∑ªÂä†Â§áÁî®ËßÜÈ¢ëIDÔºå‰ª•Èò≤‰∏ªË¶ÅËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•
                backupVideos: ['BV1vkrnYFEHZ', 'BV1NBwVeGEyJ', 'BV14D4y1F7cg', 'BV1b5411z7vC', 'BV1Kb421Y7vb']
            },
            'exotic-theater': {
                videos: ['BV1pK411u7y6', 'BV1gM4y117zU', 'BV1Yp4y1W7u3'],
                titles: ['Á¨¨‰∏ÄÈõÜ', 'Á¨¨‰∫åÈõÜ', 'Á¨¨‰∏âÈõÜ'],
                backupVideos: ['BV1pK411u7y6', 'BV1gM4y117zU', 'BV1Yp4y1W7u3']
            },
            'battle-theater': {
                videos: ['BV1wx411e71v', 'BV1Qs411e7SN', 'BV1Em4y1H7To'],
                titles: ['Á¨¨‰∏ÄÈõÜ', 'Á¨¨‰∫åÈõÜ', 'Á¨¨‰∏âÈõÜ'],
                backupVideos: ['BV1wx411e71v', 'BV1Qs411e7SN', 'BV1Em4y1H7To']
            },
            'chess-theater': {
                videos: ['BV1Ry4y1k7pc', 'BV1bq4y1s7kA', 'BV1pVEczMEhW', 'BV1TF7ozaE8a', 'BV1Vd4y1i7YP'],
                titles: ['ÂçïÈ©¨ÊìíÁéã', 'Ê£ãÁéãÊùØ', '‰∫îÁæäÊùØ', 'ÊõπÂ≤©Á£ä‰∏ìËÆø', 'ÂÖ∞ÂÖ∞'],
                backupVideos: ['BV1Ry4y1k7pc', 'BV1bq4y1s7kA', 'BV1pVEczMEhW', 'BV1TF7ozaE8a', 'BV1Vd4y1i7YP']
            },
            'treasure-theater': {
                videos: ['BV1yt4y1Q7SS', 'BV1pi4y147tQ', 'BV1dY411s7Vd', 'BV1La41197wZ', 'BV12B4y1Q7tA'],
                titles: ['ËÆ©Â≠êÂºπÈ£û', 'Â§ßÂ®ÅÂ§©Èæô', 'ÁãÇ‰∫∫Êó•ÂØÑ', 'È¢ÜÂØºËÆ≤ËØù', 'ÂêæËæàÊ•∑Ê®°'],
                backupVideos: ['BV1yt4y1Q7SS', 'BV1pi4y147tQ', 'BV1dY411s7Vd', 'BV1La41197wZ', 'BV12B4y1Q7tA']
            }
        };

        // ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•ËÆ°Êï∞Âô®
        const videoLoadFailCount = {};

        // Ëé∑ÂèñÊâÄÊúâËßÜÈ¢ëÁî®‰∫éÈöèÊú∫Êí≠Êîæ
        const allVideos = Object.values(videoConfig).flatMap(config =>
            config.videos.map((video, index) => ({
                bvid: video,
                theater: Object.keys(videoConfig)[Object.values(videoConfig).indexOf(config)],
                index: index
            }))
        );

        // ÂàáÊç¢ÂΩ±Èô¢ÊòæÁ§∫
        function toggleTheater(theaterId) {
            const theater = document.getElementById(theaterId);
            const header = theater.querySelector('.theater-header');
            const content = theater.querySelector('.theater-content');

            // Â¶ÇÊûúÂΩìÂâçÂΩ±Èô¢Â∑≤ÁªèÊâìÂºÄÔºåÂàôÂÖ≥Èó≠
            if (header.classList.contains('active')) {
                header.classList.remove('active');
                content.classList.remove('active');
                return;
            }

            // ÂÖ≥Èó≠ÊâÄÊúâÂÖ∂‰ªñÂΩ±Èô¢
            document.querySelectorAll('.theater-header.active').forEach(h => {
                h.classList.remove('active');
                h.parentNode.querySelector('.theater-content').classList.remove('active');
            });

            // ÊâìÂºÄÂΩìÂâçÂΩ±Èô¢
            header.classList.add('active');
            content.classList.add('active');

            // Êõ¥Êñ∞‰æßËæπÊ†èÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-target') === theaterId) {
                    item.classList.add('active');
                }
            });

            // Âπ≥ÊªëÊªöÂä®Âà∞ÂΩ±Èô¢‰ΩçÁΩÆ
            theater.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Êõ¥ÊîπËßÜÈ¢ë
        function changeVideo(theaterId, index) {
            const config = videoConfig[theaterId];
            if (!config || index < 0 || index >= config.videos.length) return;

            const iframe = document.querySelector(`#${theaterId.replace('-theater', '-iframe')}`);

            // ÁßªÈô§Â∑≤Âä†ËΩΩÁ±ªÔºå‰ΩøÂÖ∂Ê∑°Âá∫
            iframe.classList.remove('loaded');

            // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
            showNotification(`Ê≠£Âú®Âä†ËΩΩÔºö${config.titles[index]}...`);

            // ÁîüÊàêËßÜÈ¢ëIDÁöÑÈîÆ
            const videoKey = `${theaterId}-${index}`;

            // Ê£ÄÊü•ÊòØÂê¶ÊúâÂ§±Ë¥•ËÆ∞ÂΩï
            if (!videoLoadFailCount[videoKey]) {
                videoLoadFailCount[videoKey] = 0;
            }

            try {
                // Áü≠ÊöÇÂª∂ËøüÂêéÂä†ËΩΩÊñ∞ËßÜÈ¢ëÔºåÂÆûÁé∞Âπ≥ÊªëËøáÊ∏°
                setTimeout(() => {
                    // Ê†πÊçÆÂ§±Ë¥•Ê¨°Êï∞ÈÄâÊã©‰∏ªËßÜÈ¢ëÊàñÂ§áÁî®ËßÜÈ¢ë
                    let videoId = config.videos[index];
                    let params = '&p=1&high_quality=1&autoplay=0&danmaku=0';

                    // Â¶ÇÊûúÂ§±Ë¥•Ê¨°Êï∞ËøáÂ§öÔºå‰ΩøÁî®Â§áÁî®ËßÜÈ¢ëÊ∫ê
                    if (videoLoadFailCount[videoKey] > 2 && config.backupVideos && config.backupVideos[index]) {
                        videoId = config.backupVideos[index];
                        params += '&as_wide=1'; // Ê∑ªÂä†È¢ùÂ§ñÂèÇÊï∞ÔºåÂ∞ùËØïÈÅøÂÖçÁºìÂ≠ò
                    }

                    // Ê∑ªÂä†ÈöèÊú∫ÂèÇÊï∞ÈÅøÂÖçÁºìÂ≠òÈóÆÈ¢ò
                    const cacheBuster = `&t=${new Date().getTime()}`;

                    // ËÆæÁΩÆiframeÊ∫ê
                    iframe.src = `https://player.bilibili.com/player.html?bvid=${videoId}${params}${cacheBuster}`;

                    // ÁõëÂê¨iframeÂä†ËΩΩÂÆåÊàê‰∫ã‰ª∂
                    iframe.onload = function () {
                        iframe.classList.add('loaded');
                        showNotification(`Ê≠£Âú®Êí≠ÊîæÔºö${config.titles[index]}`);
                        // ÈáçÁΩÆÂ§±Ë¥•ËÆ°Êï∞
                        videoLoadFailCount[videoKey] = 0;

                        // Â∞ùËØïÊ≥®ÂÖ•ÈîôËØØÂ§ÑÁêÜËÑöÊú¨Âà∞iframe
                        try {
                            setTimeout(() => {
                                try {
                                    // Â∞ùËØïËÆøÈóÆiframeÂÜÖÂÆπÂπ∂Ê≥®ÂÖ•ÈîôËØØÂ§ÑÁêÜ
                                    if (iframe.contentWindow) {
                                        iframe.contentWindow.onerror = function () {
                                            return true; // ÈòªÊ≠¢ÈîôËØØÂÜíÊ≥°
                                        };
                                    }
                                } catch (e) {
                                    // ÂøΩÁï•Ë∑®ÂüüÈîôËØØ
                                }
                            }, 1000);
                        } catch (e) {
                            // ÂøΩÁï•ÊâÄÊúâÈîôËØØ
                        }
                    };

                    // Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜ
                    iframe.onerror = function () {
                        videoLoadFailCount[videoKey]++;
                        showNotification(`ËßÜÈ¢ëÂä†ËΩΩ‰∏≠... (Â∞ùËØï: ${videoLoadFailCount[videoKey]})`);

                        // Â¶ÇÊûúÂ§±Ë¥•Ê¨°Êï∞‰∏çÂ§öÔºåÂ∞ùËØïÈáçÊñ∞Âä†ËΩΩ
                        if (videoLoadFailCount[videoKey] <= 3) {
                            setTimeout(() => {
                                changeVideo(theaterId, index);
                            }, 1000);
                        } else {
                            // Â§±Ë¥•Ê¨°Êï∞ËøáÂ§öÔºåÊòæÁ§∫ËßÜÈ¢ë‰ΩÜ‰∏çÊä•Èîô
                            iframe.classList.add('loaded');
                            showNotification(`ËßÜÈ¢ëÂ∑≤ÂáÜÂ§áÂ∞±Áª™`);
                        }
                    };

                    // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
                    const buttons = document.querySelectorAll(`#${theaterId} .video-btn`);
                    buttons.forEach((btn, i) => {
                        btn.classList.toggle('active', i === index);
                    });
                }, 300);
            } catch (error) {
                console.log('ËßÜÈ¢ëÂä†ËΩΩÈîôËØØ:', error);
                showNotification('ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï');
                videoLoadFailCount[videoKey]++;
            }
        }

        // ÈöèÊú∫Êí≠ÊîæËßÜÈ¢ë
        function playRandomVideo() {
            const randomVideo = allVideos[Math.floor(Math.random() * allVideos.length)];

            // ÊâìÂºÄÂØπÂ∫îÂΩ±Èô¢
            toggleTheater(randomVideo.theater);

            // Êí≠ÊîæÈÄâ‰∏≠ÁöÑËßÜÈ¢ë
            setTimeout(() => {
                changeVideo(randomVideo.theater, randomVideo.index);
            }, 300);

            showNotification('üé≤ ÈöèÊú∫Êí≠Êîæ‰∏≠...');
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ÊòæÁ§∫ÁàÜÁ±≥Ëä±Âä®Áîª
        function showPopcorn() {
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const popcorn = document.createElement('div');
                    popcorn.className = 'popcorn';
                    popcorn.textContent = 'üçø';
                    popcorn.style.left = Math.random() * (window.innerWidth - 50) + 'px';
                    popcorn.style.top = Math.random() * (window.innerHeight - 100) + 50 + 'px';
                    document.body.appendChild(popcorn);

                    setTimeout(() => popcorn.remove(), 2000);
                }, i * 150);
            }

            showNotification('üçø ÁàÜÁ±≥Ëä±Êù•ÂñΩÔºÅ');
        }

        // ÂàáÊç¢ÊöóÊ®°Âºè
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');

            const btn = document.getElementById('darkModeBtn');
            const icon = btn.querySelector('i');

            if (document.body.classList.contains('dark-mode')) {
                icon.className = 'bi bi-brightness-high';
                showNotification('üåô Â∑≤ÂàáÊç¢Âà∞ÊöóÈªëÊ®°Âºè');
                localStorage.setItem('darkMode', 'true');
            } else {
                icon.className = 'bi bi-moon-stars';
                showNotification('‚òÄÔ∏è Â∑≤ÂàáÊç¢Âà∞Êòé‰∫ÆÊ®°Âºè');
                localStorage.setItem('darkMode', 'false');
            }
        }

        // ÂàáÊç¢ÂÖ®Â±è
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    showNotification('üñ•Ô∏è Â∑≤ËøõÂÖ•ÂÖ®Â±èÊ®°Âºè');
                }).catch(() => {
                    showNotification('‚ùå ÂÖ®Â±èÊ®°Âºè‰∏çÂèØÁî®');
                });
            } else {
                document.exitFullscreen().then(() => {
                    showNotification('üñ•Ô∏è Â∑≤ÈÄÄÂá∫ÂÖ®Â±èÊ®°Âºè');
                });
            }
        }

        // ÂàáÊç¢ËÉåÊôØÈü≥‰πê
        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            const musicBtn = document.getElementById('musicBtn');

            if (music.paused) {
                try {
                    // Ê∑ªÂä†Áî®Êà∑‰∫§‰∫íÊ£ÄÊµãÔºåËß£ÂÜ≥Ëá™Âä®Êí≠ÊîæÈôêÂà∂ÈóÆÈ¢ò
                    const playPromise = music.play();

                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            showNotification('üéµ ËÉåÊôØÈü≥‰πêÂ∑≤ÂºÄÂêØ');
                            musicBtn.innerHTML = '<i class="bi bi-pause-circle"></i> ÊöÇÂÅúÈü≥‰πê';
                            // ËÆ∞‰ΩèÈü≥‰πêÁä∂ÊÄÅ
                            localStorage.setItem('musicPlaying', 'true');
                        }).catch(err => {
                            // ÈùôÈªòÂ§ÑÁêÜÈîôËØØ
                            showNotification('‚ö†Ô∏è Èü≥‰πêÂ∑≤ÂáÜÂ§áÂ∞±Áª™');
                            musicBtn.classList.remove('pulse-animation');
                            localStorage.setItem('musicPlaying', 'false');
                        });
                    }
                } catch (e) {
                    // ÂÆåÂÖ®ÈùôÈªòÂ§ÑÁêÜÊâÄÊúâÈîôËØØ
                    showNotification('‚ö†Ô∏è Èü≥‰πêÂäüËÉΩÂ∑≤ÂáÜÂ§áÂ∞±Áª™');
                    localStorage.setItem('musicPlaying', 'false');
                }
            } else {
                try {
                    music.pause();
                    showNotification('üîá ËÉåÊôØÈü≥‰πêÂ∑≤ÊöÇÂÅú');
                    musicBtn.innerHTML = '<i class="bi bi-music-note-beamed"></i> ËÉåÊôØÈü≥‰πê';
                    // ËÆ∞‰ΩèÈü≥‰πêÁä∂ÊÄÅ
                    localStorage.setItem('musicPlaying', 'false');
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜÈîôËØØ
                    showNotification('üîá ËÉåÊôØÈü≥‰πêÂ∑≤ÊöÇÂÅú');
                    localStorage.setItem('musicPlaying', 'false');
                }
            }
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function () {
            // È¢ÑÂä†ËΩΩÂÖ≥ÈîÆËµÑÊ∫ê
            const preloadLinks = [
                { rel: 'preconnect', href: 'https://player.bilibili.com', crossorigin: 'anonymous' },
                { rel: 'dns-prefetch', href: 'https://player.bilibili.com' },
                { rel: 'preconnect', href: 'https://cdn.jsdelivr.net', crossorigin: 'anonymous' }
            ];

            preloadLinks.forEach(link => {
                const linkEl = document.createElement('link');
                linkEl.rel = link.rel;
                linkEl.href = link.href;
                if (link.crossorigin) {
                    linkEl.crossOrigin = link.crossorigin;
                }
                document.head.appendChild(linkEl);
            });

            // Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜÔºåÈò≤Ê≠¢ÊéßÂà∂Âè∞Â§ßÈáèÊä•Èîô
            window.addEventListener('unhandledrejection', function (event) {
                // ÂøΩÁï•ÁâπÂÆöÁ±ªÂûãÁöÑÈîôËØØ
                if (event.reason && (
                    event.reason.toString().includes('MANIFEST') ||
                    event.reason.toString().includes('CORS') ||
                    event.reason.toString().includes('connection') ||
                    event.reason.toString().includes('429') ||
                    event.reason.toString().includes('bili-user-fingerprint') ||
                    event.reason.toString().includes('StorageCache') ||
                    event.reason.toString().includes('top-level optout') ||
                    event.reason.toString().includes('cross-origin frame') ||
                    event.reason.toString().includes('XMLHttpRequest')
                )) {
                    event.preventDefault();
                }
            });

            // Â±èËîΩBÁ´ôÊåáÁ∫πÂíåÂ≠òÂÇ®ÁºìÂ≠òÈîôËØØ
            const originalConsoleError = console.error;
            console.error = function (...args) {
                if (args.length > 0 && typeof args[0] === 'string' && (
                    args[0].includes('bili-fe-fp') ||
                    args[0].includes('bili-user-fingerprint') ||
                    args[0].includes('StorageCache') ||
                    args[0].includes('Trigger perf bottleneck')
                )) {
                    return; // Â±èËîΩËøô‰∫õÈîôËØØ
                }
                originalConsoleError.apply(console, args);
            };

            // ÁªëÂÆö‰∫ã‰ª∂
            document.getElementById('darkModeBtn').addEventListener('click', toggleDarkMode);
            document.getElementById('randomBtn').addEventListener('click', playRandomVideo);
            document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);

            // ÁªëÂÆö‰æßËæπÊ†èÂàÜÁ±ªÁÇπÂáª‰∫ã‰ª∂
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function () {
                    const target = this.getAttribute('data-target');
                    toggleTheater(target);
                });
            });

            // Ê£ÄÊü•ÊöóÊ®°ÂºèËÆæÁΩÆ
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeBtn').querySelector('i').className = 'bi bi-brightness-high';
            }

            // Ê†áËÆ∞ÊâÄÊúâiframe‰∏∫Â∑≤Âä†ËΩΩ
            // ‰ΩøÁî®ÈîôËØØÂ§ÑÁêÜÊù•Èò≤Ê≠¢iframeÂä†ËΩΩÈîôËØØ
            document.querySelectorAll('.theater-video iframe').forEach(iframe => {
                iframe.onload = function () {
                    this.classList.add('loaded');
                };
                iframe.onerror = function (e) {
                    console.log('Iframe loading error handled');
                    showNotification('ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï');
                };
            });

            // Ê£ÄÊü•Èü≥‰πêËÆæÁΩÆ - ÈúÄË¶ÅÁî®Êà∑‰∫§‰∫íÊâçËÉΩÊí≠Êîæ
            const musicBtn = document.getElementById('musicBtn');
            if (localStorage.getItem('musicPlaying') === 'true') {
                // ÊòæÁ§∫ÊèêÁ§∫ËÄå‰∏çÊòØËá™Âä®Êí≠ÊîæÔºåÈÅøÂÖçÊµèËßàÂô®Ëá™Âä®Êí≠ÊîæÈôêÂà∂
                showNotification('ÁÇπÂáªÈü≥‰πêÊåâÈíÆÂºÄÂßãÊí≠Êîæ');
                musicBtn.classList.add('pulse-animation');
            }

            // Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜÂáΩÊï∞
            window.addEventListener('error', function (e) {
                // ËøáÊª§ÊéâBÁ´ôËµÑÊ∫êÂä†ËΩΩÈîôËØØÂíåCORSÈîôËØØÔºåËøô‰∫õÊòØÊ≠£Â∏∏ÁöÑÈôêÂà∂
                if (e.message && (
                    e.message.includes('MANIFEST') ||
                    e.message.includes('CORS') ||
                    e.message.includes('Failed to load resource') ||
                    e.message.includes('429') ||
                    e.message.includes('bili-user-fingerprint') ||
                    e.message.includes('StorageCache') ||
                    e.message.includes('Trigger perf bottleneck') ||
                    e.message.includes('cross-origin frame') ||
                    e.message.includes('Access-Control-Allow-Origin') ||
                    e.message.includes('XMLHttpRequest') ||
                    e.message.includes('Uncaught') ||
                    e.message.includes('core.6dcbfdb4.js')
                )) {
                    // ÂøΩÁï•Ëøô‰∫õÈîôËØØÔºå‰∏çÂÅöÂ§ÑÁêÜ
                    e.preventDefault();
                    return;
                }

                console.log('ÊçïËé∑Âà∞ÈîôËØØ:', e.message);
            }, true);

            // Êã¶Êà™ÁΩëÁªúËØ∑Ê±ÇÈîôËØØ
            const originalFetch = window.fetch;
            window.fetch = function (...args) {
                return originalFetch.apply(this, args)
                    .catch(error => {
                        if (error && error.toString().includes('bili')) {
                            // ÈùôÈªòÂ§ÑÁêÜBÁ´ôÁõ∏ÂÖ≥ÈîôËØØ
                            return Promise.reject(new Error('Silenced Bilibili API error'));
                        }
                        return Promise.reject(error);
                    });
            };

            // ÈöêËóèÂä†ËΩΩÂä®Áîª
            setTimeout(() => {
                const loading = document.querySelector('.loading');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 300);
            }, 600);
        });
    </script>
</body>

</html>