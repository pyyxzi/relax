<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>问卷 </title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 开始页面 -->
    <div class="page start-page active">
        <div class="start-content">
            <h2 class="greeting">亲爱的小宗</h2>
            <div class="message-box">
                <p class="message-text">这份问卷不是一场考试，没有对错之分。它更像是一个温馨的游戏，一面有趣的镜子，帮助我们看见彼此内心深处对感情的看法和期待。</p>
                <p class="message-text">我希望通过这些轻松的、富有想象力的问题，我们能聊聊天，分享那些平时不常说起的话题，从而更懂对方，也更珍惜我们共同经营的这份感情。</p>
                <p class="message-text">请放松心情，选择最贴近你第一想法的答案。期待你的分享！</p>
            </div>
            <button class="start-btn" onclick="startQuiz()">开始答题</button>
        </div>
    </div>

    <!-- 问题页面 -->
    <div class="page question-page">
        <!-- 顶部进度条和信息 -->
        <div class="top-bar">
            <div class="progress-info">
                <span class="question-number">1/50</span>
                <span class="timer">⏱ 00:00</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>

        <!-- 问题内容区域 -->
        <div class="question-container">
            <div class="question-card">
                <div class="question-type-badge" id="questionTypeBadge">选择题</div>
                <div class="question-text" id="questionText"></div>

                <!-- 选择题选项 -->
                <div class="options-container" id="optionsContainer"></div>

                <!-- 主观题输入框 -->
                <div class="text-answer-container" id="textAnswerContainer" style="display: none;">
                    <textarea id="textAnswer" placeholder="请输入你的答案..." maxlength="500"></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/500
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部按钮 -->
        <div class="bottom-actions">
            <button class="nav-btn prev-btn" onclick="prevQuestion()" id="prevBtn">
                <span>← 上一题</span>
            </button>
            <button class="nav-btn next-btn" onclick="nextQuestion()" id="nextBtn" disabled>
                <span>下一题 →</span>
            </button>
        </div>
    </div>

    <!-- 完成页面 -->
    <div class="page complete-page">
        <div class="complete-content">
            <div class="success-animation">
                <div class="checkmark">✓</div>
            </div>
            <h2 class="complete-title">答题完成！</h2>
            <p class="complete-message">
                亲爱的小宗，感谢你认真完成这份问卷。<br>
                你的每一个答案都很珍贵，都让我更懂你一些。<br>
                无论结果如何，我都想让你知道：<br>
                能和你一起经营这份感情，是我的幸运。
            </p>
            <div class="complete-stats">
                <div class="stat-item">
                    <span class="stat-label">总用时</span>
                    <span class="stat-value" id="totalTime">--</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">完成时间</span>
                    <span class="stat-value" id="completeTime">--</span>
                </div>
            </div>
            <button class="analyze-btn" onclick="startAIAnalysis()" id="analyzeBtn">
                <span>查看分析报告</span>
            </button>
        </div>
    </div>

    <!-- AI分析结果页面 -->
    <div class="page analysis-page">
        <div class="analysis-container">
            <div class="analysis-header">
                <h2>分析报告</h2>
                <p class="analysis-subtitle">基于你的回答生成的个性化情感分析</p>
            </div>

            <div id="analysisLoading" class="analysis-loading">
                <div class="loading-spinner"></div>
                <p>AI正在分析你的答案...</p>
                <p class="loading-tip">这可能需要几秒钟</p>
            </div>

            <div id="analysisContent" class="analysis-content" style="display: none;">
                <!-- 总体评分 -->
                <div class="overall-score">
                    <h3>综合评分</h3>
                    <div class="score-circle" id="overallScore">0</div>
                    <p class="score-desc" id="scoreDesc">计算中...</p>
                </div>

                <!-- 多维度雷达图 -->
                <div class="chart-card">
                    <h3>多维度分析</h3>
                    <canvas id="radarChart"></canvas>
                </div>

                <!-- 各维度详细得分 -->
                <div class="dimensions-grid" id="dimensionsGrid"></div>

                <!-- AI评价与建议 -->
                <div class="ai-feedback">
                    <h3>评价与建议</h3>
                    <div id="aiFeedback" class="feedback-content"></div>
                </div>

                <!-- 保存按钮 -->
                <div class="action-buttons">
                    <button class="save-btn" onclick="saveAnalysisResult()">保存结果</button>
                    <button class="share-btn" onclick="viewFullReport()">返回顶部</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script type="module" src="script.js"></script>
</body>

</html>